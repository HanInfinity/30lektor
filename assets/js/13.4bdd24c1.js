(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{211:function(t,a,s){t.exports=s.p+"assets/img/1569405561308.c72950d2.png"},212:function(t,a,s){t.exports=s.p+"assets/img/1569405840034.5aa34f40.png"},274:function(t,a,s){"use strict";s.r(a);var e=s(0),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"想寫部落格-lektor也沒問題！"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#想寫部落格-lektor也沒問題！","aria-hidden":"true"}},[t._v("#")]),t._v(" 想寫部落格?Lektor也沒問題！")]),t._v(" "),e("p",[t._v("Lektor官網提供了快速指南，針對常用功能撰寫了比較詳細的說明文件，接下來這10天將快速看過一遍！")]),t._v(" "),e("p",[t._v("今天要來介紹的是部落格功能，這個功能在之前使用quickstart時已經接觸許多，這邊再統一說明，讓你對Blog的功能更清楚。說明流程將由Model開始，接著提到template，最後才是content。")]),t._v(" "),e("h2",{attrs:{id:"model"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#model","aria-hidden":"true"}},[t._v("#")]),t._v(" Model")]),t._v(" "),e("p",[t._v("一般的部落格規劃中，會有一個列表畫面，點列表中的其中一篇文章，才會進入檢視該文章內容。因此部落格功能需要建立2個model，這裡分別命名為"),e("code",[t._v("blog.ini")]),t._v("及"),e("code",[t._v("blog-post.ini")]),t._v("，一個管理列表，一個管理文章。")]),t._v(" "),e("h3",{attrs:{id:"blog-ini"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#blog-ini","aria-hidden":"true"}},[t._v("#")]),t._v(" blog.ini")]),t._v(" "),e("p",[t._v("以下為部落格的model內容，裡面除了設定"),e("code",[t._v("blog-post.ini")]),t._v("為其子項目("),e("code",[t._v("[children]")]),t._v(")，並設定排序方式("),e("code",[t._v("order_by")]),t._v(")，也設定了每一頁顯示的文章數量("),e("code",[t._v("per_page")]),t._v(")。除此之外，"),e("code",[t._v("hidden")]),t._v("使得新增頁面時無法選擇此model作為頁面(按下鉛筆圖案後的介面)，等同於無法新增同樣為blog的網頁；"),e("code",[t._v("protected")]),t._v("則保護blog model不被刪除。")]),t._v(" "),e("div",{staticClass:"language-ini extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[e("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[model]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("name")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" Blog")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("label")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" Blog")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("hidden")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" yes")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("protected")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" yes")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[children]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("model")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" blog-post")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("order_by")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" -pub_date, title")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[pagination]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("enabled")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" yes")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("per_page")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" 10")]),t._v("\n")])])]),e("h3",{attrs:{id:"blog-post-ini"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#blog-post-ini","aria-hidden":"true"}},[t._v("#")]),t._v(" blog-post.ini")]),t._v(" "),e("p",[e("code",[t._v("blog-post")]),t._v("為部落格文章的model。每筆資料包含"),e("code",[t._v("標題(title)")]),t._v("、"),e("code",[t._v("日期(pub_date)")]),t._v("、"),e("code",[t._v("作者(author)")]),t._v("及"),e("code",[t._v("內文(body)")]),t._v("其中"),e("code",[t._v("title")]),t._v("及"),e("code",[t._v("pub_date")]),t._v("在"),e("code",[t._v("blog.ini")]),t._v("有引用到，作為排序使用。")]),t._v(" "),e("div",{staticClass:"language-ini extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[e("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[model]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("name")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" Blog Post")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("label")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" {{ this.title }}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("hidden")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" yes")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[fields.title]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("label")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" Title")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("type")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" string")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("size")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" large")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[fields.pub_date]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("label")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" Publication date")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("type")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" date")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("width")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" 1/2")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[fields.author]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("label")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" Author")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("type")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" string")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("width")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" 1/2")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[fields.body]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("label")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" Body")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("type")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" markdown")]),t._v("\n")])])]),e("h2",{attrs:{id:"templates"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#templates","aria-hidden":"true"}},[t._v("#")]),t._v(" Templates")]),t._v(" "),e("h3",{attrs:{id:"blog-html"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#blog-html","aria-hidden":"true"}},[t._v("#")]),t._v(" blog.html")]),t._v(" "),e("p",[t._v("第1行使用"),e("code",[t._v("layout.html")]),t._v("的模板，第2行則是引入分頁的模組，"),e("code",[t._v("pagination")]),t._v("的使用邏輯會在後面的文章說明。在"),e("code",[t._v("layout.html")]),t._v("中有"),e("code",[t._v("title")]),t._v("及"),e("code",[t._v("body")]),t._v("2個block，所以"),e("code",[t._v("blog.html")]),t._v("中也會針對這2個block填入要顯示的資訊。")]),t._v(" "),e("div",{staticClass:"language-jinja2 extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('{% extends "layout.html" %}\n{% from "macros/pagination.html" import render_pagination %}\n{% block title %}My Blog{% endblock %}\n{% block body %}\n  <h1>My Blog</h1>\n\n  <ul class="blog-index">\n  {% for post in this.pagination.items %}\n    <li>\n      <a href="{{ post|url }}">{{ post.title }}</a> —\n      by {{ post.author }}\n      on {{ post.pub_date|dateformat }}\n    </li>\n  {% endfor %}\n  </ul>\n\n  {% if this.pagination.pages > 1 %}\n    {{ render_pagination(this.pagination) }}\n  {% endif %}\n{% endblock %}\n')])])]),e("h3",{attrs:{id:"blog-post-html"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#blog-post-html","aria-hidden":"true"}},[t._v("#")]),t._v(" blog-post.html")]),t._v(" "),e("p",[t._v("blog-post顯示文章內容，所以跟blog.html比就沒有"),e("code",[t._v("pagination")]),t._v("的需要。同時在"),e("code",[t._v("title")]),t._v("及"),e("code",[t._v("body")]),t._v("2個block填入要顯示的資訊。")]),t._v(" "),e("div",{staticClass:"language-jinja2 extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('{% extends "layout.html" %}\n{% block title %}{{ this.title }} | My Blog{% endblock %}\n{% block body %}\n  <h1>{{ this.title }}\n  <p class="meta">\n    by {{ this.author }}\n    on {{ this.pub_date|dateformat(\'full\') }}\n  <div class="body">{{ this.body }}</div>\n{% endblock %}\n')])])]),e("h2",{attrs:{id:"contents"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#contents","aria-hidden":"true"}},[t._v("#")]),t._v(" Contents")]),t._v(" "),e("p",[t._v("完成了model及template還不夠，少了contents.lr，就無法在網頁中看到，所以要在"),e("code",[t._v("content/")]),t._v("資料夾中加入部落格的頁面資料夾，假設命名"),e("code",[t._v("blog")]),t._v("，則在blog資料夾中建立contents.lr，如此一來就能讀取到blog.html。在contents.lr中寫入以下程式碼，指定model為blog：")]),t._v(" "),e("h3",{attrs:{id:"blog-content-lr"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#blog-content-lr","aria-hidden":"true"}},[t._v("#")]),t._v(" blog/content.lr")]),t._v(" "),e("div",{staticClass:"language-ini extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[t._v("_model: blog\n")])])]),e("p",[t._v("此時就可以在網頁中看到blog的畫面，也能在編輯頁面中建立文章。")]),t._v(" "),e("h2",{attrs:{id:"修改url架構"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改url架構","aria-hidden":"true"}},[t._v("#")]),t._v(" 修改URL架構")]),t._v(" "),e("p",[t._v("以quickstart建置的blog專案，裡面包含一篇文章"),e("code",[t._v("first-post")]),t._v("，預設的URL為"),e("code",[t._v("http://127.0.0.1:5000/blog/first-post/")])]),t._v(" "),e("p",[e("img",{attrs:{src:s(211),alt:"1569405561308"}})]),t._v(" "),e("p",[t._v("想要改URL架構，可以在"),e("code",[t._v("blog.ini")]),t._v("檔案中將這段文字加到"),e("code",[t._v("[children]")]),t._v("項目中：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("slug_format = {{ (this.pub_date|dateformat('YYYY/M/') if this.pub_date) ~ this._id }}\n")])])]),e("div",{staticClass:"language-ini extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[e("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[model]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("name")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" Blog")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("label")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" Blog")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("hidden")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" yes")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("protected")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" yes")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[children]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("model")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" blog-post")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("order_by")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" -pub_date, title")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("slug_format")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" {{ (this.pub_date|dateformat('YYYY/M/') if this.pub_date) ~ this._id }}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[pagination]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("enabled")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" yes")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("per_page")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" 10")]),t._v("\n")])])]),e("p",[t._v("這個slug_format設定URL架構包含文章的年份及日期，以下是修改後的URL路徑：")]),t._v(" "),e("p",[e("img",{attrs:{src:s(212),alt:"1569405840034"}})]),t._v(" "),e("p",[t._v("可以看到路徑改為"),e("code",[t._v("/blog/2019/9/first-post/")])]),t._v(" "),e("p",[t._v("看完之後我想blog這個功能對你來說已經駕輕就熟了吧！")]),t._v(" "),e("h1",{attrs:{id:"團隊系列文"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#團隊系列文","aria-hidden":"true"}},[t._v("#")]),t._v(" 團隊系列文")]),t._v(" "),e("p",[t._v("CSScoke - "),e("a",{attrs:{href:"https://ithelp.ithome.com.tw/users/20112550/ironman/2623",target:"_blank",rel:"noopener noreferrer"}},[t._v("金魚都能懂的這個網頁畫面怎麼切 - 金魚都能懂了你還怕學不會嗎"),e("OutboundLink")],1),t._v("\nKing Tzeng - "),e("a",{attrs:{href:"https://ithelp.ithome.com.tw/users/20103130/ironman/2125",target:"_blank",rel:"noopener noreferrer"}},[t._v("IoT沒那麼難！新手用JavaScript入門做自己的玩具～"),e("OutboundLink")],1),t._v("\nHina Hina - "),e("a",{attrs:{href:"https://ithelp.ithome.com.tw/users/20120000/ironman/2256",target:"_blank",rel:"noopener noreferrer"}},[t._v("陣列大亂鬥"),e("OutboundLink")],1),t._v("\n阿斬 - "),e("a",{attrs:{href:"https://ithelp.ithome.com.tw/users/20120536/ironman/2571",target:"_blank",rel:"noopener noreferrer"}},[t._v("Python 程式交易 30 天新手入門"),e("OutboundLink")],1),t._v("\nClarence - "),e("a",{attrs:{href:"https://ithelp.ithome.com.tw/users/20117701/ironman/2634",target:"_blank",rel:"noopener noreferrer"}},[t._v("LINE bot 好好玩 30 天玩轉 LINE API"),e("OutboundLink")],1),t._v("\n塔塔默 - "),e("a",{attrs:{href:"https://ithelp.ithome.com.tw/users/20112552/ironman/2735",target:"_blank",rel:"noopener noreferrer"}},[t._v("用Python開發的網頁不能放到Github上？Lektor說可以！！"),e("OutboundLink")],1),t._v("\nVita Ora - "),e("a",{attrs:{href:"https://ithelp.ithome.com.tw/users/20112656/ironman/2782",target:"_blank",rel:"noopener noreferrer"}},[t._v("好 Js 不學嗎 !? JavaScript 入門中的入門。"),e("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=n.exports}}]);